<!DOCTYPE html>
<html>
<head>
  <title>Upload File</title>
</head>
<body>

<h2>Upload a File</h2>

<input type="file" id="fileInput">
<button id="uploadBtn">Upload</button>

<p id="result"></p>

<script>
document.getElementById("uploadBtn").onclick = async () => {
  const fileInput = document.getElementById("fileInput");
  if (!fileInput.files.length) {
    alert("Please select a file!");
    return;
  }

  const file = fileInput.files[0];
  const formData = new FormData();
  formData.append("file", file);

  const resultP = document.getElementById("result");
  resultP.textContent = "Uploading...";

  try {
    const res = await fetch("/api/upload", { method: "POST", body: formData });
    const data = await res.json();

    if (data.status === "success") {
      resultP.innerHTML = `File uploaded! <a href="${data.fileUrl}" target="_blank">View File</a><br>Link copied to clipboard.`;
      navigator.clipboard.writeText(data.fileUrl);
    } else {
      resultP.textContent = "Error: " + data.message;
    }
  } catch (err) {
    resultP.textContent = "Upload failed: " + err.toString();
  }
};
</script>

</body>
</html>
